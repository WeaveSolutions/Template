# Play Framework Configuration
play {
  # HTTP settings
  http {
    secret.key = ${?APPLICATION_SECRET}
    secret.key = "changeme"
    
    # Request handler
    requestHandler = "play.api.http.DefaultHttpRequestHandler"
    
    # Error handler
    errorHandler = "play.api.http.DefaultHttpErrorHandler"
  }
  
  # Modules
  modules {
    enabled += "modules.SwaggerModule"
    enabled += "modules.AuthModule"
  }
  
  # Filters
  filters {
    enabled += "play.filters.cors.CORSFilter"
    enabled += "play.filters.csrf.CSRFFilter"
    enabled += "play.filters.headers.SecurityHeadersFilter"
    enabled += "play.filters.gzip.GzipFilter"
    
    cors {
      allowedOrigins = ${?CORS_ORIGINS}
      allowedOrigins = ["http://localhost:3000", "http://localhost:3001"]
      allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
      allowedHttpHeaders = ["Accept", "Content-Type", "Origin", "Authorization", "X-Auth-Token"]
      exposedHeaders = ["X-Request-Id"]
      preflightMaxAge = 3 days
      supportsCredentials = true
    }
    
    csrf {
      cookie.secure = false
      cookie.httpOnly = true
    }
  }
  
  # Server settings
  server {
    http.port = ${?SCALA_API_PORT}
    http.port = 8060
    http.address = "0.0.0.0"
    
    # Max request size
    parser.maxMemoryBuffer = 10MB
    parser.maxDiskBuffer = 100MB
  }
  
  # Akka settings
  akka {
    log-config-on-start = false
    jvm-exit-on-fatal-error = false
  }
}

# Application settings
app {
  name = "nexpo-api-scala"
  version = "1.0.0"
  
  # Auth0 configuration
  auth0 {
    domain = ${?AUTH0_DOMAIN}
    audience = ${?AUTH0_AUDIENCE}
    clientId = ${?AUTH0_CLIENT_ID}
    clientSecret = ${?AUTH0_CLIENT_SECRET}
    issuer = "https://"${?AUTH0_DOMAIN}"/"
    jwksUrl = "https://"${?AUTH0_DOMAIN}"/.well-known/jwks.json"
  }
  
  # MindsDB configuration
  mindsdb {
    url = ${?MINDSDB_URL}
    url = "http://localhost:47334"
    timeout = 30 seconds
  }
  
  # Swagger configuration
  swagger {
    enabled = true
    path = "/swagger"
    apiDocsPath = "/api-docs"
    info {
      title = "Nexpo API - Scala Play Framework"
      version = "1.0.0"
      description = "Production-ready API backend with Play Framework and Auth0"
      contact {
        name = "API Support"
        email = "support@nexpo.com"
      }
      license {
        name = "MIT"
        url = "https://opensource.org/licenses/MIT"
      }
    }
  }
}

# Logging configuration
logging {
  level = ${?LOG_LEVEL}
  level = "INFO"
  
  # Structured logging
  appenders = ["STDOUT", "FILE"]
  
  file {
    path = "logs/application.log"
    maxHistory = 30
    maxSize = "10MB"
  }
}

# Database configuration (for future use)
db {
  default {
    driver = org.postgresql.Driver
    url = ${?DATABASE_URL}
    username = ${?DATABASE_USER}
    password = ${?DATABASE_PASSWORD}
    
    # Connection pool settings
    hikaricp {
      minimumIdle = 5
      maximumPoolSize = 20
      connectionTimeout = 30 seconds
    }
  }
}
